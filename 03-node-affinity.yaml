# 🔎 affinity and anti-affinity kubernetes

apiVersion: v1
kind: Pod
metadata:
  name: with-node-affinity
spec:
  affinity:
    nodeAffinity:
      # requiredDuringSchedulingIgnoredDuringExecution: # <-- Hard-rule
      #   nodeSelectorTerms:
      #   - matchExpressions:
      #     - key: hardware   # < --
      #       operator: In  # < -- matching the labels
      #       values:
      #       #- gpu  # # <-- we can give multiple values, means multiple nodes value mention cheyachhu, affinity & antiffinity lo. 
      #       - gpuuuu
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 1  # <-- only soft-rule lo ney weight untumdhi, Hard-rule lo undadhu.
        preference:
          matchExpressions:
          - key: another-node-label-key
            operator: In
            values:
            - another-node-label-value
  containers:
  - name: with-node-affinity
    image: nginx 

# nodeSelctor lo ite key: value, only single value, ఒక్క value మాత్రమే. 
# affinity lo ite ఒక్క key కి multiple values ఇవ్వచ్చు. --> multiple nodes 